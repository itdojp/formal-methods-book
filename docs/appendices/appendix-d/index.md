# 付録D：演習問題解答

本文の演習問題の代表的な解答例と解説を掲載します。段階的なヒントとチェックポイントを含める予定です。

## 解答の読み方（共通）

- 骨子→模範解答の流れ：章末に示した「解答の方向性（骨子）」に沿って、最小限の根拠と用語整合を確認
- 採点観点：各章末の採点観点に対応。網羅性/一貫性/再現性/妥当性を重視

## サンプル（第2章 問1）

- 選定：Alloy（初期導入/反例探索）＋TLA+（分散の安全/活性）
- 理由（要約）：構造整合の早期発見はAlloyの小スコープ反例が有効。分散性質はTLA+の安全/活性で段階的に担保

チェックポイント
- 比較軸が3観点を満たすか、選定と文脈の一貫性
- 導入段階/CI配置（PR/夜間/リリース前）への落とし込み可否

## サンプル（第8章 問1）

- 最小反例（例）: 初期 Q=[], Enqueue(1), Enqueue(2), Dequeue(), Dequeue() → FIFO逸脱
- 前提: 単一キュー/単一消費/境界条件（空時のDequeue禁止）

チェックポイント
- 反例トレースの再現性（seed/深さ固定）
- 境界条件・前提の明示と妥当性

## サンプル（第3章 問1）

- UML制約例: 「顧客は0個以上の注文を持つ（多重度 0..*）」「1つの注文はちょうど1人の顧客に属する（多重度 1）」
- 写像の要点（Alloy例）:
  - 集合: `sig Customer { orders: set Order }`、`sig Order { owner: one Customer }`
  - 制約: `fact Ownership { all o: Order | one o.owner and o in o.owner.orders }`

チェックポイント
- 多重度の整合（one/set）と双方参照の一貫性
- 不変（fact）として常時成立に置くか、性質（assert）で検査するかの使い分け

## サンプル（第4章 問2）

- 診断順序: 1) 制約の過不足（弱すぎ/強すぎ）→ 2) スコープ（過小/過大）→ 3) 抽象度（過度な単純化）
- 例: 反例で循環が報告 → `acyclic` 制約の追加/修正を優先（制約適正化）

チェックポイント
- 反例の根因に近い制約から手当てすること（スコープ調整は副作用が大きい）
- 修正後の再検証と回帰防止（assertの追加）

## サンプル（第5章 問1）

- 影響の整理:
  - 事前条件: 不変追加により操作の適用可能条件が強化される可能性
  - 事後条件: 新不変の充足を保証する追加義務（更新式の見直し）

チェックポイント
- `'` 付き変数の整合（更新前後の対応）
- 前提強化による到達不能操作の検出と方針（分割/緩和）

## サンプル（第10章 問2）

- ループ不変の例: 「配列の先頭からi未満は昇順」
- 追加前提: 1) 初期化で不変が成り立つ、2) 本体で不変が維持される、3) 終了性: 変位関数 `n-i` が自然数で単調減少

チェックポイント
- 三点チェック（初期化/保持/終了）の明示
- 減少関数や良基順序の明確化
